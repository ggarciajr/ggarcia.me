---
layout: post
title: "Flora Time Tracker - Custom 404 error page"
excerpt: "Setting up yesod to show a custom error page"
date: 2016-04-25
tags: [Haskell, 404, Error]
author: ggarciajr
comments: true
---

Customizing the error pages in Yesod is as simple as writing a function to display the custom template when an error happens.

To customize the 404 error page we need to create the following function:

```haskell
errorHandler NotFound = fmap toTypedContent $ do
  master <- getYesod
  defaultLayout $ do
    setTitleI MsgTitle
    $(widgetFile "404")
errorHandler other = defaultErrorHandler other
```

The **fmap toTypedContent** is required to satisfy type constraints, other than that, the function is just a typical handler that injects the 404.hamlet template into the default layout.

Note that we are pattern matching the error type to decide what template to use for each type of error. In our case we defined a custom template for errors of type **NotFound** only. Any other error will be handled by the **defaultErrorHandler**.

You can find more info about custom error pages <a href="http://www.yesodweb.com/book/yesod-typeclass#yesod-typeclass_custom_error_pages" target="_blank">here</a> and the commit implementing the changes on <a href="https://github.com/ggarciajr/flora/commit/6e84a439b8a44fe3f0a7efb96172014859b330f2" target="_blank">github</a>.

<div class="spacer">
  <div class="mask"></div>
</div>

Start the application and access <a href="http://localhost:3000/invalid" target="_blank">http://localhost:3000/invalid</a> and you should see the following page:

<img src="/img/posts/flora-404.png"/>
